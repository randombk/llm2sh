#!/usr/bin/env python3

export = DLPModule(
  name="llm2sh",
  desc="[PUBLIC] Ask GPT to run a command",
  license=[
    "GPL-3.0",
    "Copyright (C) 2024 DLP Networks",
    "Copyright (C) 2024 David Jia Wei Li",
  ],
  generate_python_version_file=True,

  setup_script=[
    # Set up venv and install dependencies
    '''
    if [[ ! -f .venv/bin/activate ]]
      then uv venv --python python3.11
    fi
    ''',
    '''
      source .venv/bin/activate
      uv pip install -e .[dev]
      deactivate
    ''',
  ],

  activate_script=[
    '''
      if [[ ! -d .venv ]]
        then echo "Virtual environment not found."
        echo "Run './dlp setup $DLP_MODULE'"
        exit 1
      fi
    '''
  ],

  build_script=[
    'uv build',
  ],
)
